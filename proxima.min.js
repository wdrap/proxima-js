/*! proxima-js 2020-04-17 */

!function(){"use strict";var g,h,u,s,v;function c(r){s[0]=r;for(var n=0;n<g.length-1;n++)for(var e=0;e<g[n+1];e++){for(var t=u[n][e],a=0;a<g[n];a++)t+=s[n][a]*h[n][e][a];s[n+1][e]=1/(1+Math.exp(-t))}return s[g.length-1]}function w(r){for(var n=s[s.length-1],e=0,t=0;t<n.length;t++)e+=Math.pow(r[t]-n[t],2);return.5*e}function _(r){for(var n=g.length-1;0<=n;n--)for(var e=0,t=g[n];e<t;e++){var a=0;if(n===g.length-1)a=r[e]-s[n][e];else for(var o=0;o<v[n+1].length;o++)a+=v[n+1][o]*h[n][o][e];v[n][e]=a*s[n][e]*(1-s[n][e])}}function m(r){for(var n=0;n<g.length-1;n++)for(var e=0;e<g[n+1];e++){u[n][e]+=v[n+1][e]*r;for(var t=0;t<g[n];t++)h[n][e][t]+=v[n+1][e]*r*s[n][t]}}function r(o){(o=o||{}).neural_network=o.neural_network||[2,3,1],o.learning_rate=o.learning_rate||.3;var i=o.max_iterations||15e3,f=o.cost_threshold||.005,l=o.log_after_x_iterations||0;return function(r){g=r.neural_network,h=new Array(g.length-2),u=new Array(g.length-2),s=new Array(g.length),v=new Array(g.length-1);for(var n=0,e=g.length;n<e;n++){s[n]=new Array(g[n]),v[n]=new Array(g[n]);for(var t=0,a=g[n];t<a;t++)s[n][t]=0,v[n][t]=0;if(n===e-1)break;u[n]=new Array(g[n+1]),h[n]=new Array(g[n+1]);for(var o=0;o<g[n+1];o++){u[n][o]=2*Math.random()-1,h[n][o]=new Array(g[n]);for(var i=0;i<g[n];i++)h[n][o][i]=2*Math.random()-1}}}(o),{train:function(r){console.time("training");for(var n=1,e=0;e<i&&f<n;e++)for(var t=0,a=r.length;t<a;t++)c(r[t].inputs),n=w(r[t].targets),e%l==0&&console.timeLog("training","error: "+n),f<n&&(_(r[t].targets),m(o.learning_rate));console.timeLog("training","error: "+n,"iterations: "+e),console.timeEnd("training")},predict:function(r){return c(r)}}}"undefined"!=typeof exports&&module.exports?module.exports=r:this.Proxima=r}();